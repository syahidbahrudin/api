generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL") // uses connection pooling
}

model User {
  id              Int      @id @default(autoincrement())
  username        String   @unique
  email           String   @unique
  password        String
  userType        String
  userJoinedDate  DateTime @default(now()) @map(name: "userJoinedDate ")
  profile         Profile?
}

model Profile {
  id               Int      @id @default(autoincrement())
  userId           Int
  profileName      String
  profilePhoneNo   String
  profileAbout     String
  profilePicture   String
  profileCourse    String
  profileCollege   String

  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  products        Product[]

  @@unique([userId])
}

model Product {
  id               Int      @id @default(autoincrement())
  profileId        Int
  productName      String
  productPrice     Decimal
  productDesc      String
  productRate      Float
  productReview    String
  productStatus    String
  uploadDate       DateTime
  productURL       String

  profile         Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  carts           Cart[]

  @@unique([profileId, productName])
}

model Cart {
  id               Int      @id @default(autoincrement())
  productId        Int

  product         Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
}
